{% extends "base.html" %}
{% block title %}–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã - –ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –°–∏–º—É–ª—è—Ç–æ—Ä{% endblock %}
{% block content %}
<div style="max-width: 800px; margin: 0 auto; padding: 20px;">
    <div class="card" style="text-align: center; margin-bottom: 30px;">
        <h1 style="color: #2c3e50; margin-bottom: 10px;">–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! üèõÔ∏è</h1>
        <p style="font-size: 18px; color: #7f8c8d;">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∞—à–µ–≥–æ –ø—Ä–∞–≤–ª–µ–Ω–∏—è</p>
    </div>

    <!-- –û–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç -->
    <div style="background: linear-gradient(135deg, #2c3e50, #34495e); color: white; border-radius: 10px; padding: 30px; margin-bottom: 30px; text-align: center;">
        <div style="font-size: 48px; margin-bottom: 10px;">
            {% if total_score >= 80 %}üëë
            {% elif total_score >= 60 %}‚≠ê
            {% elif total_score >= 40 %}‚öñÔ∏è
            {% else %}üí•{% endif %}
        </div>
        <h2 style="font-size: 32px; margin-bottom: 15px;">
            {% if total_score >= 80 %}–í–µ–ª–∏–∫–∏–π –ø—Ä–∞–≤–∏—Ç–µ–ª—å!
            {% elif total_score >= 60 %}–•–æ—Ä–æ—à–∏–π —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å
            {% elif total_score >= 40 %}–°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
            {% else %}–ü–ª–æ—Ö–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç{% endif %}
        </h2>
        <div style="font-size: 64px; font-weight: bold; margin-bottom: 20px;">{{ total_score }}</div>
        <p style="font-size: 18px; opacity: 0.9;">–ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</p>
    </div>

    <!-- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
    <div class="card" style="margin-bottom: 30px;">
        <h3 style="color: #2c3e50; margin-bottom: 25px; text-align: center;">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å—Ç—Ä–∞–Ω—ã</h3>

        <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 15px; margin-bottom: 30px;">
            <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 8px; border-top: 4px solid #27ae60;">
                <div style="font-size: 36px; font-weight: bold; color: #27ae60; margin-bottom: 10px;">{{ stats.economy }}</div>
                <div style="font-size: 14px; color: #666;">–≠–∫–æ–Ω–æ–º–∏–∫–∞</div>
                <div style="font-size: 12px; color: #999; margin-top: 5px;">
                    {% if stats.economy >= 80 %}–û—Ç–ª–∏—á–Ω–∞—è
                    {% elif stats.economy >= 60 %}–•–æ—Ä–æ—à–∞—è
                    {% elif stats.economy >= 40 %}–°—Ç–∞–±–∏–ª—å–Ω–∞—è
                    {% else %}–°–ª–∞–±–∞—è{% endif %}
                </div>
            </div>

            <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 8px; border-top: 4px solid #3498db;">
                <div style="font-size: 36px; font-weight: bold; color: #3498db; margin-bottom: 10px;">{{ stats.social }}</div>
                <div style="font-size: 14px; color: #666;">–°–æ—Ü–∏—É–º</div>
                <div style="font-size: 12px; color: #999; margin-top: 5px;">
                    {% if stats.social >= 80 %}–í—ã—Å–æ–∫–∏–π
                    {% elif stats.social >= 60 %}–•–æ—Ä–æ—à–∏–π
                    {% elif stats.social >= 40 %}–°—Ä–µ–¥–Ω–∏–π
                    {% else %}–ù–∏–∑–∫–∏–π{% endif %}
                </div>
            </div>

            <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 8px; border-top: 4px solid #2ecc71;">
                <div style="font-size: 36px; font-weight: bold; color: #2ecc71; margin-bottom: 10px;">{{ stats.environment }}</div>
                <div style="font-size: 14px; color: #666;">–≠–∫–æ–ª–æ–≥–∏—è</div>
                <div style="font-size: 12px; color: #999; margin-top: 5px;">
                    {% if stats.environment >= 80 %}–ß–∏—Å—Ç–∞—è
                    {% elif stats.environment >= 60 %}–•–æ—Ä–æ—à–∞—è
                    {% elif stats.environment >= 40 %}–°—Ä–µ–¥–Ω—è—è
                    {% else %}–ü–ª–æ—Ö–∞—è{% endif %}
                </div>
            </div>

            <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 8px; border-top: 4px solid #9b59b6;">
                <div style="font-size: 36px; font-weight: bold; color: #9b59b6; margin-bottom: 10px;">{{ stats.popularity }}</div>
                <div style="font-size: 14px; color: #666;">–ü–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å</div>
                <div style="font-size: 12px; color: #999; margin-top: 5px;">
                    {% if stats.popularity >= 80 %}–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è
                    {% elif stats.popularity >= 60 %}–í—ã—Å–æ–∫–∞—è
                    {% elif stats.popularity >= 40 %}–°—Ä–µ–¥–Ω—è—è
                    {% else %}–ù–∏–∑–∫–∞—è{% endif %}
                </div>
            </div>

            <div style="text-align: center; padding: 20px; background: #f8f9fa; border-radius: 8px; border-top: 4px solid #e74c3c;">
                <div style="font-size: 36px; font-weight: bold; color: #e74c3c; margin-bottom: 10px;">{{ stats.budget }}</div>
                <div style="font-size: 14px; color: #666;">–ë—é–¥–∂–µ—Ç</div>
                <div style="font-size: 12px; color: #999; margin-top: 5px;">
                    {% if stats.budget >= 80 %}–ü—Ä–æ—Ñ–∏—Ü–∏—Ç
                    {% elif stats.budget >= 60 %}–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω
                    {% elif stats.budget >= 40 %}–î–µ—Ñ–∏—Ü–∏—Ç
                    {% else %}–ö—Ä–∏–∑–∏—Å{% endif %}
                </div>
            </div>
        </div>

        <div style="text-align: center; margin-top: 20px;">
            <div style="display: inline-block; background: #f8f9fa; padding: 15px 30px; border-radius: 25px;">
                <span style="color: #666;">–°—É–º–º–∞—Ä–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</span>
                <span style="font-size: 28px; font-weight: bold; color: #2c3e50; margin-left: 10px;">{{ total_score }} –∏–∑ 100</span>
            </div>
        </div>
    </div>

    <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ -->
    <div class="card">
        <h3 style="color: #2c3e50; margin-bottom: 20px; text-align: center;">üí° –ê–Ω–∞–ª–∏–∑ –ø—Ä–∞–≤–ª–µ–Ω–∏—è</h3>

        {% if total_score >= 80 %}
        <div style="background: #d4edda; border-left: 4px solid #28a745; padding: 20px; border-radius: 5px; margin-bottom: 20px;">
            <h4 style="color: #155724; margin-bottom: 10px;">üèÜ –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!</h4>
            <p style="color: #155724; margin: 0;">
                –í—ã –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏ –≤—ã–¥–∞—é—â–∏–µ—Å—è –Ω–∞–≤—ã–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è! –°—Ç—Ä–∞–Ω–∞ –ø—Ä–æ—Ü–≤–µ—Ç–∞–µ—Ç –ø–æ–¥ –≤–∞—à–∏–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º.
                –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –≤ —Ç–æ–º –∂–µ –¥—É—Ö–µ!
            </p>
        </div>
        {% elif total_score >= 60 %}
        <div style="background: #d1ecf1; border-left: 4px solid #17a2b8; padding: 20px; border-radius: 5px; margin-bottom: 20px;">
            <h4 style="color: #0c5460; margin-bottom: 10px;">‚≠ê –•–æ—Ä–æ—à–∞—è —Ä–∞–±–æ—Ç–∞!</h4>
            <p style="color: #0c5460; margin: 0;">
                –í—ã —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç–µ —Å—Ç—Ä–∞–Ω–æ–π. –ï—Å—Ç—å –Ω–µ–±–æ–ª—å—à–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, –Ω–æ –≤ —Ü–µ–ª–æ–º —Å–∏—Ç—É–∞—Ü–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è.
                –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å—Ñ–µ—Ä–∞–º–∏.
            </p>
        </div>
        {% elif total_score >= 40 %}
        <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 20px; border-radius: 5px; margin-bottom: 20px;">
            <h4 style="color: #856404; margin-bottom: 10px;">‚öñÔ∏è –ï—Å—Ç—å –Ω–∞–¥ —á–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å</h4>
            <p style="color: #856404; margin: 0;">
                –°—Ç—Ä–∞–Ω–∞ –∏—Å–ø—ã—Ç—ã–≤–∞–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä—É–¥–Ω–æ—Å—Ç–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–¥–µ–ª–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ —Å–ª–∞–±—ã–º —Å—Ç–æ—Ä–æ–Ω–∞–º
                –∏ –Ω–∞–π—Ç–∏ –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–º —Ä–∞–∑–≤–∏—Ç–∏–µ–º –∏ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å—é.
            </p>
        </div>
        {% else %}
        <div style="background: #f8d7da; border-left: 4px solid #dc3545; padding: 20px; border-radius: 5px; margin-bottom: 20px;">
            <h4 style="color: #721c24; margin-bottom: 10px;">üí• –¢—Ä–µ–±—É—é—Ç—Å—è —Å—Ä–æ—á–Ω—ã–µ –º–µ—Ä—ã</h4>
            <p style="color: #721c24; margin: 0;">
                –°—Ç—Ä–∞–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫—Ä–∏–∑–∏—Å–µ. –ù–µ–æ–±—Ö–æ–¥–∏–º—ã —Ä–∞–¥–∏–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ–ª–∏—Ç–∏–∫–µ.
                –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ —É–¥–µ–ª–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ —Å–∞–º—ã–º –ø—Ä–æ–±–ª–µ–º–Ω—ã–º —Å—Ñ–µ—Ä–∞–º.
            </p>
        </div>
        {% endif %}

        <div style="margin-top: 30px;">
            <h4 style="color: #2c3e50; margin-bottom: 15px;">üìà –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</h4>
            <ul style="color: #333; line-height: 1.6;">
                {% if stats.economy < 40 %}
                <li>–£–≤–µ–ª–∏—á—å—Ç–µ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ —ç–∫–æ–Ω–æ–º–∏–∫—É –¥–ª—è —Å—Ç–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–æ—Å—Ç–∞</li>
                {% endif %}
                {% if stats.social < 40 %}
                <li>–£–¥–µ–ª–∏—Ç–µ –±–æ–ª—å—à–µ –≤–Ω–∏–º–∞–Ω–∏—è —Å–æ—Ü–∏–∞–ª—å–Ω—ã–º –ø—Ä–æ–≥—Ä–∞–º–º–∞–º</li>
                {% endif %}
                {% if stats.environment < 40 %}
                <li>–ü—Ä–∏–º–∏—Ç–µ –º–µ—Ä—ã –ø–æ –∑–∞—â–∏—Ç–µ –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã</li>
                {% endif %}
                {% if stats.popularity < 40 %}
                <li>–£–ª—É—á—à–∏—Ç–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—é —Å –Ω–∞—Å–µ–ª–µ–Ω–∏–µ–º</li>
                {% endif %}
                {% if stats.budget < 40 %}
                <li>–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –±—é–¥–∂–µ—Ç–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã</li>
                {% endif %}
                {% if total_score >= 60 %}
                <li>–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ, –Ω–µ –ø—Ä–µ–Ω–µ–±—Ä–µ–≥–∞—è –Ω–∏ –æ–¥–Ω–æ–π —Å—Ñ–µ—Ä–æ–π</li>
                {% endif %}
            </ul>
        </div>
    </div>

    <!-- –î–µ–π—Å—Ç–≤–∏—è –ø–æ—Å–ª–µ –∏–≥—Ä—ã -->
    <div style="display: flex; gap: 15px; justify-content: center; margin-top: 40px; flex-wrap: wrap;">
        <a href="/new_game" class="btn" style="background: linear-gradient(135deg, #2c3e50, #3498db); color: white; padding: 15px 30px; border-radius: 5px; text-decoration: none; font-weight: bold;">
            <i class="fas fa-redo"></i> –ù–æ–≤–∞—è –∏–≥—Ä–∞
        </a>
        <a href="/dashboard" class="btn" style="background: #95a5a6; color: white; padding: 15px 30px; border-radius: 5px; text-decoration: none; font-weight: bold;">
            <i class="fas fa-chart-bar"></i> –í –ö–∞–±–∏–Ω–µ—Ç
        </a>
        <a href="/history" class="btn" style="background: #f39c12; color: white; padding: 15px 30px; border-radius: 5px; text-decoration: none; font-weight: bold;">
            <i class="fas fa-history"></i> –ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä
        </a>
    </div>
</div>

<style>
    .card {
        background: white;
        border-radius: 10px;
        padding: 30px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .btn {
        display: inline-block;
        padding: 12px 24px;
        border-radius: 5px;
        text-decoration: none;
        font-weight: bold;
        border: none;
        cursor: pointer;
        transition: all 0.3s;
    }

    .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        const elements = document.querySelectorAll('.card, .btn');
        elements.forEach((el, index) => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(20px)';

            setTimeout(() => {
                el.style.transition = 'opacity 0.5s, transform 0.5s';
                el.style.opacity = '1';
                el.style.transform = 'translateY(0)';
            }, index * 100);
        });

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ
        const totalScore = {{ total_score|default(0) }};
        if (totalScore >= 80) {
            setTimeout(() => {
                alert('üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –æ—Ç–ª–∏—á–Ω—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º! –í—ã –Ω–∞—Å—Ç–æ—è—â–∏–π –ª–∏–¥–µ—Ä!');
            }, 1000);
        }
    });
</script>
{% endblock %}